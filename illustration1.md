
# 使用说明一
-------

以下我们从创建一个新的账号开始来实际截屏，通过截屏来演示这个客户端的使用。

## 启动程序后，我们通过signup命令创建一个新的账号，账号名为`dage`

<div align='center'><img src='./doc/imgs/01.png' width=90%></a></div>
<div align='center'><i>创建新账号</i></div>

- 需要说明的是，为了方便测试，signup命令直接通过账号名和新密码的方式从一个远程的微服务创建新的测试账号。这个账号创建微服务实际上是一个[taiyi-js库的开发示例](https://github.com/hongzhongx/taiyi-js/tree/main/examples/account-server)，可以在taiyi-js的项目代码中看到，它本身是一个利用taiyi-js库开发的很简单nodejs应用。

- 在正式环境中，你的密码只能由你自己保留，可以在本地生成满足太乙网络协议的账号私钥，然后直接连接太乙网络用公钥创建账号，你是不需要把密码或者私钥传输到任何服务器上来完成这个账号创建过程的。有很多开源的工具和方法可以本地来做这件事情，例如太乙网络项目的[xuanpin（玄牝）](https://github.com/hongzhongx/taiyi/tree/main/programs/xuanpin)程序，就是一个基于C++语言编写的连接工具，这个工具有很多直接的命令来和太乙网络的白玉京api交互；另外，taiyi-js库本身也实现了各种密码学的方法以及和白玉京api交互的方法，可以开发基于JS/TS的各种工具和网站，上面说的“测试账号创建微服务”就是一个例子。在未来，可能还有python的库来提供python程序的支持。

- signup这个命令中，微服务拿到你申请的账号名和密码后，直接生成太乙网络格式的私钥和公钥（由于根据账号名和密码按特定规则可以生成相同的私钥，所以微服务不缓存你的任何密码和私钥，以后要使用时就直接生成即可，参考本客户端[代码实现](./app.ts)）。然后，在sifu账号（我们的测试水龙头账号，由他来提供测试的阳寿和真气）的帮助下，自动创建你的账号并绑定你的公钥。接着，sifu账号再传给你这个神魂一些真气，满足你初期的一些活动，毕竟，没有真气运转，不论你是凡人还是修真者，都寸步难行，甚至一个法宝本身的运转，也是需要灌注真气的，这部分理论支持详见[真气守恒定律](https://github.com/hongzhongx/taiyi/blob/main/doc/zhenqishouheng.md)。

## 测试账号创建成功后，就可以使用login命令登录了

<div align='center'><img src='./doc/imgs/02.png' width=60%></a></div>
<div align='center'><i>“登录”账号</i></div>

- 技术上，这里的“登录”，不是传统网络游戏那种连接上服务器并且握手验证密码成功的意思。这里密码只有你本地才有，这里的登录也仅仅是按规则在本地根据账号密码生成私钥，缓存在本地供后面使用而已，这个过程无需和网络做任何交互。

- 本客户端代码中，这一步在节点服务器上多做了一次“查询”，帮你确保一下你的密码生成的公钥是匹配你这个账号的。

## 获得一个测试用的法宝“衍童石”

- 测试网络上有一些免费的资源（水龙头）可供测试，考虑到这是一种实验游戏客户端，用户可以不使用像玄牝[xuanpin（玄牝）](https://github.com/hongzhongx/taiyi/tree/main/programs/xuanpin)这样的命令行程序来直接和太乙网络交互。因此，测试网络上提供了一些实验法宝来供应这些免费资源。

<div align='center'><img src='./doc/imgs/02_1.png' width=80%></a></div>
<div align='center'><i>获取一块免费的“衍童石”</i></div>

- 目前你只有账号，相当于只有神魂，你还没有创建任何一个实体（NFA）。后面玩家主要以角色实体（Actor）来参与游戏交互，但在创建角色之前，我们要为角色准备一些“资源和出生工具”，这本身通过另外一个实验法宝来完成，这个法宝叫“[衍童石](https://github.com/hongzhongx/taiyi-contracts?tab=readme-ov-file#%E8%A1%8D%E7%AB%A5%E7%9F%B3)”。

- 通过命令`give_me_yantongshi`，测试账号微服务可以直接在测试网创建并送给你一个新的衍童石实体NFA，返回的NFA序号（示例中是38）就是这个实体独一无二的序号，这个序号是你操作的一个主要参数。

### 1、制作法宝，给衍童石注入一些材质

<div align='center'><img src='./doc/imgs/02_2.png' width=60%></a></div>
<div align='center'><i>给“衍童石”注入水属性材质（织物）</i></div>

- 一个实体，根据其定义通常都要求实体的材质总量达到一定的等价真气值，实体才能正常运转天道。材质不足的实体就是还未成型或者破损的实体，不能正常运行天道。在每次运行天道后，实体的材质也有一定的损耗，这是一个**底层法则**。
- 实体的五行属性由其材质决定。一个实体在初创时，是没有任何材质的，此时可以看到实体的五行是飘忽不定的（可以通过玄牝等命令行工具直接查看实体数据）。
- 这里，我们通过一个实验账号微服务支持的命令`inject_material_to_nfa`，对38号实体（即衍童石）灌注了2000的FABR（2000单位织物量）。由于1单位的织物等价含有3单位真气，因此2000织物相当于含有6000真气，这是远高于衍童石正常运行需要的材质量（3000真气）的。
- 正式网络的游戏中，通常由法宝的工坊、炼器师傅来完成这种打造法宝实体的繁复过程。这里出于演示的目的，对实体涉及到的一些基本概念进行暴露，我们是在“手搓”法宝，对法宝的材质进行直接的灌注。
- 技术上，在[实验账号微服务](https://github.com/hongzhongx/taiyi-js/tree/main/examples/account-server)的app.ts代码中可以看到，`inject_material_to_nfa`这个命令的执行是自动通过sifu账号来操作测试链上的第4号实体来为指定NFA注入材质。这个第4号实体其实是一个运转中的“[炼天塔](https://github.com/hongzhongx/taiyi-contracts#%E7%82%BC%E5%A4%A9%E5%A1%94)”，在测试链上sifu负责让炼天塔有充分的资源来产生用于我们测试的各种材料。

### 2、给法宝“衍童石”装入用于造人的资源

<div align='center'><img src='./doc/imgs/02_3.png' width=60%></a></div>
<div align='center'><i>给“衍童石”装入金属性资源（金石）</i></div>

- 我们后面创建的新角色，需要通过衍童石来让他们诞生，衍童石在造人的时候，会将自身所含的资源注入成这个角色的材质。注意，这里注入角色的材质资源不是来自衍童石实体本身材质，比如我们这里的衍童石本身是水属性的一个实体，而它内部却含有金属性的资源，在诞生角色的时候，它会把金属性资源注入成角色的材质。这点要注意区别，打个比方，我们用铁锅炒菜，锅里放盐，做出来的菜含有盐而不是含有铁。铁这个资源是铁锅本身的材质，它的多少只会决定铁锅是否还能正常使用，而盐这个资源是铁锅中装着的独立材料，用于决定菜的材质品质。
- 通过`deposit_resource_to_nfa`命令，我们在38号实体（即衍童石）里免费装入了300000单位的金石。技术上，在实验账号微服务里（参考服务的app.ts代码），是通过sifu账号操作衍童石本身的接口来把sifu账号里的资源传递到NFA中。

### 3、把衍童石安装到牛心村

<div align='center'><img src='./doc/imgs/02_4.png' width=60%></a></div>
<div align='center'><i>把“衍童石”安装到牛心村</i></div>

- 衍童石必须要被安装到合适的区域才能够诞生角色，当然，角色也就出生在衍童石安放的地区。
- “安放”是衍童石实体本身的一个命令`set_zone`，这个命令要从衍童石的视角来发起，因此我们得先用神魂（账号）夺舍衍童石实体来操作它。
- 通过命令`play 38`来夺舍第38号实体，我们就可以从衍童石的视角来执行它本身的天道指令了。
- 我（作为衍童石）执行了`set_zone [9]`来把我自己安装到了牛心村里。注意牛心村本身也是实体，它的序号是9。

## 创建一个名叫“大哥”的角色

<div align='center'><img src='./doc/imgs/03.png' width=90%></a></div>
<div align='center'><i>新建角色“大哥”</i></div>

- “登录”完成后，就可以凭借太乙网络的协议来和大傩世界交互了。然而从游戏的角度来说，我们这个客户端面对的是“玩家”，因此需要有大傩世界的“角色”来操作。

- new命令来创建角色，第一个参数是姓氏，第二个参数是名讳。角色在太乙网络仅仅是一个实体（NFA）的扩展概念（Actor），这里创建的新角色默认并没有任何有意思的操作方法和逻辑，甚至都没有出生，因此我们需要用衍童石进行一个系列特殊的操作来先把这个角色打造成一个“凡人”。

## 扮演一个实体——衍童石

- 我们再次深入来讲一下衍童石视角

<div align='center'><img src='./doc/imgs/04.png' width=70%></a></div>
<div align='center'><i>对于玩传统游戏的玩家来说，这一步很奇怪很特殊。然而，这种操作在太乙网络里面是比较普遍的，也是一种特色。</i></div>

- 根据[太乙宇宙观](https://github.com/hongzhongx/taiyi/blob/main/doc/yuzhou_explain.md)，账号，对应的就是元神，是没有具体形态的。无论是司命、凡人还是修真者，甚至普通花草树木又或者地点城市和法宝，他们自身虽然含有天道逻辑，但都需要元神来操作。

- 换句话说，账号可以接入到大傩世界的任何角色或者任何实体，能接入的范围之大，从法宝本身，一直到司命。这也是某种意义上的“角色扮演”，一旦账号接入这个“角色”，你就是在扮演它，你可以操作它对应的命令来运转它的天道（SGS脚本）。

- **从这个角度出发，整个大傩世界，并非像传统游戏一样，先开发好代码，再把内容建设好，之后玩家才能来玩。而且传统游戏中玩家也只是在玩一个成品，游戏的内容开发、世界的重大历史进程、人物物品的所有权，都和玩家无关。这里不是，这里从一开始，整个世界只有一些基本的规则（因果规则这些），世界是没有“内容”的，维护因果天道的司命也好，天道逻辑脚本开发人员也好，还是普通的玩家、凡人和修真者，都是从一开始就可以进入这个世界，从一开始就一边通过操作不同实体来建设这个世界，这个世界也在越来越多的天道支撑下进行丰富复杂的运转和演化。可以说，在大傩世界早期，所有接入的账号，既是在玩游戏，也是开发游戏，也是在建设游戏世界。**

## 直接操作“衍童石”来让“大哥”出生并注入“凡人”的天道逻辑

<div align='center'><img src='./doc/imgs/05.png' width=80%></a></div>
<div align='center'><i>操作衍童石，参与一下“开发”</i></div>

- 未来的游戏中，玩家遇到这些原始操作的情况会越来越少，因为世界已经被我们初期进来的接入者建设得很完善了。
- 之前如果没有操作过“衍童石”的`set_zone`命令，需要先用这个命令来设置“牛心村”为其驻地。
- 衍童石的`born_actor`命令用来出生“大哥”这个角色，后面的参数是这个角色的性别性取向什么的，还有各种初始属性值，这个客户端目前很简单，都是直接敲复杂命令，未来的一些客户端特别是图形化客户端，会方便这些操作（甚至可能是自动化的）。注意，这个命令最后一个参数给的10000（万分比的分子），意思是把衍童石内部装的所有资源都注入成角色的材质，如果按前面的示例，38号衍童石含有300000单位的金石，因此新生的“大哥”角色实体，材质就含有300000单位的金石，进而使得“大哥”这个角色不仅满足了凡人的身体要求（正常运转的材质要求），还使得他的五行属性成为了金属性。
- 后一个命令是`upgrade_actor`，这个命令是“衍童石”本身的一个特殊功能，就是将指定角色内禀的天道逻辑，升级到我们[实践项目中实验的“凡人”逻辑](https://github.com/hongzhongx/taiyi-contracts/blob/main/nfas/actors/normal.lua)。我们实验的“凡人”，就是一个具有基本的能看（look）、能走（go）、能感受（hp、resource、inventory、map）、能探索（exploit）和能简单修真（cultivation）的普通人。
- 衍童石的这两个命令，都会对世界造成因果影响，因此需要天道司命的确认，命令发出后的响应时间需要等待至少一息（约为三秒钟）。而且，由于要推动因果天道运转，造成因果影响的任何命令，都需要消耗一定的真气。如果你神魂真气不足，则不会成功，这也是测试账号生成服务为啥会给你赠送一些初始真气便于体验的原因了。
- 再次提醒，衍童石在运行这些天道后，其本身的材质也会耗损，当衍童石自身材质的量太低时，衍童石就不能再运转任何天道了。这个时候，只能通过一些方法来维修它了，比如`inject_material_to_nfa`。

## 让我们夺舍“大哥”吧

<div align='center'><img src='./doc/imgs/06.png' width=60%></a></div>
<div align='center'><i>开始扮演“大哥”</i></div>

- 这就比较像MUD游戏了对吧，play命令参数填入角色名称，你就开始以这个角色的视角来进行扮演了。
- 写这篇文章的时候，可以看到大哥所在地牛心村入口，此时还有另外的角色在，这个角色叫“白灵淼”，是位“修真者”。大哥此时的身份是“普通人”，这是由实体自身的天道决定的。

## 让我“看一看”

<div align='center'><img src='./doc/imgs/07.png' width=80%></a></div>
<div align='center'><i>look</i></div>

- 根据传统，MUD游戏一般都有look指令的，就是看一下四周，或者看一下某人，或者查看一个事物。
- 这里看到的是牛心村入口处的**局部地图**，同时还能看到同在一处的另外角色。
- look命令对太乙世界没有任何影响，用技术的话说，就是只读的，这个操作可以通过任何太乙网络节点完成。你自己甚至可以从太乙网络项目编译[taiyin（太阴）](https://github.com/hongzhongx/taiyi/tree/main/programs/taiyin)程序，本地来启动一个天道节点，然后从这个节点同步大傩世界完成访问。从太乙宇宙世界观来讲，这类操作是不产生因果的，因此不需要通过司命的网络，响应速度就会非常快。由于这类命令不会消耗真气，所以可以重复执行也没有什么问题。

## 看下地图

<div align='center'><img src='./doc/imgs/08.png' width=40%></a></div>
<div align='center'><i>map</i></div>

- 之前操作衍童石的时候，最开始有个`set_zone`，参数是9，9是测试网络上牛心村的区域NFA序号，因此你这个衍童石就是被安装到了牛心村，从它生出来的人，就都是在牛心村。因此，这里运行地图命令，则查看的是牛心村的**全局地图**。

## 走一走

- 写这篇说明的时候，测试网络由其他元神创建了“牛心村”和“大梁”两个区域并将它们连通了，虽然这些区域具体没有什么内容，但是可以根据地图往南或者往北走走看。

<div align='center'><img src='./doc/imgs/09_1.png' width=60%></a></div>
<div align='center'><i>尝试往南走失败！</i></div>

- 很多时候，即使是日常动作也需要真气运转，而现在角色“大哥”体内没有什么真气，因此往南方走这个动作无法完成。

<div align='center'><img src='./doc/imgs/09_2.png' width=30%></a></div>
<div align='center'><i>给“大哥”体内注入真力</i></div>

- 可以看到，我们可以在角色身上使用一个叫`deposit_qi`的命令，这个命令很简单，主要是把元神（账号）中的真气转存一些到“大哥”体内，否则“大哥”生出来体内没有什么真气，做不了什么事情。未来会有各式各样的的法宝来专门从事元神和实体之间的交流，这个命令就不会在角色中出现了，这里纯粹是方便快速实验和演示。

<div align='center'><img src='./doc/imgs/09.png' width=80%></a></div>
<div align='center'><i>试试走南闯北</i></div>

- 往南走的话，就到达大梁城，触发了大梁城的天道逻辑。作为初期实验，入口设置了一个发放“[路引](https://github.com/hongzhongx/taiyi-contracts/blob/main/nfas/luyin.lua)”（也是一个早期实验NFA）的逻辑。注意，未来大梁城的情况随着建设，会变化很大。

- 往北走的话，又回到牛心村，触发的逻辑会给你叙述牛心村的介绍以及当前村里的一些情况，可以看到有修真者在，这个角色实体是之前sifu账号创建并持续建设的角色。注意，未来牛心村的情况随着建设，会变化很大。
